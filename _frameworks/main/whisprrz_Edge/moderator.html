{header}

<div id="oryx_content">
    <div class="frame_content">

    <h2>{l_top_moderator}</h2>
    <style>
        .button {
            width: 110px !important;
        }

        .tbl_friend td {
            vertical-align: top !important;
            padding: 5px;
        }

        .tbl_friend .tbl-header td {
            font-weight: bold;
        }

        .moderator_waiting_num {
            display: block;
            background: #c30909;
            position: absolute;
            top: -10px;
            right: -3px;
            padding: 0 6px 2px;
            color: #fff;
            font-size: 11px;
            line-height: 12px;
            border-radius: 10px;
            box-shadow: 1px 1px 5px #837878;
        }

        .radio, .checkbox {
            display: inline;
        }
    </style>

    <!-- begin_button -->
    <button class="btn blue {active_button}" onclick="location='{url_main}moderator.php?section={section}';"
        style="position: relative; margin-bottom: 10px;" title="{button_title}">
        {button_title}
        <!-- begin_moderator_waiting_num -->
        <span class="moderator_waiting_num">{moderator_num}</span>
        <!-- end_moderator_waiting_num -->
    </button>

    <!-- end_button -->

    <br><br>

    <!-- begin_group_list -->
    <form method="post" action="{url_page}">
        <input type="hidden" name="action" value="save">
        <input type="hidden" name="section" value="{cmd}">

        <!-- begin_sections -->

        <!-- begin_photos -->
        <div class="bl_form">
            <div style="padding: 0px; overflow: hidden; width: 100%;">
                <!-- begin_photo -->
                <div class="approve_photo" style="padding: 0 0px 15px 0;">
                    <b><a href='{url_main}{url_main}search_results.php?display=profile&uid={user_id}'
                            target="_blank">{user_name}</a></b><br />
                    {l_status}: <b>{status}</b><br />
                    {description}
                    <br />
                    <img src="{url_files}photo/{photo_file}_bm.jpg">
                    <!-- Divyesh - 17042024 -->
                    <div style="padding: 10px 20px; display: flex;">
                        <div style="display: flex; align-items: center;"><input type="radio" id="public_{photo_id}" class="radio" name="do[{photo_id}]" value="public" {public_check}> <label for="public_{photo_id}" style="margin: 0 0 -1px 5px;">{l_public}</label></div> &nbsp;&nbsp;
                        <div style="display: flex; align-items: center;"><input type="radio" id="private_{photo_id}" class="radio" name="do[{photo_id}]" value="private" {private_check}> <label for="private_{photo_id}" style="margin: 0 0 -1px 5px;">{l_make_private}</label></div> &nbsp;&nbsp;
                        <div style="display: flex; align-items: center;"><input type="radio" id="personal_{photo_id}" class="radio" name="do[{photo_id}]" value="personal" {personal_check}> <label for="personal_{photo_id}" style="margin: 0 0 -1px 5px;">{l_make_personal}</label></div> &nbsp;&nbsp;
                        <!-- begin_folders_move -->
                            <!-- begin_folder_item -->
                            <div style="display: flex; align-items: center;">
                                <input type="radio" id="{folder_id}_{photo_id}" class="radio" name="do[{photo_id}]" value="folder_{folder_id}" {folder_check}>
                                <label for="{folder_id}_{photo_id}" style="margin: 0 0 -1px 5px;">{folder_name}</label>
                            </div>
                            &nbsp;&nbsp;
                            <!-- end_folder_item -->
                        <!-- end_folders_move -->
                        <div style="display: flex; align-items: center;"><input type="radio" id="delete_{photo_id}" class="radio" name="do[{photo_id}]" value="del"> <label for="delete_{photo_id}" style="margin: 0 0 -1px 5px;">{l_delete}</label></div>
                    </div>
                    <!-- Divyesh - 17042024 -->
                </div>
                <!-- end_photo -->
            </div>
        </div>
        <!-- end_photos -->

        <!-- begin_text_section -->

        <!-- begin_texts -->
        <div class="bl_form">
            <table border="0" cellpadding="0" cellspacing="0" width="100%" align="center">
                <tr>
                    <td>
                        <h4 style="padding-bottom: 10px;"><a
                                href='{url_main}search_results.php?display=profile&uid={user_id}'
                                target="_blank">{user_name}</a></h4>
                    </td>
                </tr>
                <!-- begin_text -->
                <tr>
                    <td>
                        <label><b>{field_title}:</b></label>
                    </td>
                </tr>
                <tr>
                    <td>
                        <input style="margin: 10px 0px; width: 97%; " type="text" name="{name_input}[{id}]"
                            value="{value}">
                    </td>
                </tr>
                <!-- end_text -->
                <!-- begin_textarea -->
                <tr>
                    <td>
                        <label><b>{field_title}:</b></label>
                    </td>
                </tr>
                <tr>
                    <td>
                        <textarea style=" margin: 10px 0px;resize: none; width: 97%; height: 180px; " class="textarea"
                            name="{name_input}[{id}]">{value}</textarea>
                    </td>
                </tr>
                <!-- end_textarea -->
                <tr>
                    <td>
                        <input type="hidden" name="user_id[{id}]" value="{user_id}">
                        <div style="padding:10px;">
                            <input type="radio" name="do[{id}]" value="add" class="check" checked="checked"> {l_add}
                            <input type="radio" name="do[{id}]" value="del" class="check"> {l_delete}
                        </div>
                    </td>
                </tr>
            </table>
        </div>
        <!-- end_texts -->

        <!-- end_text_section -->

        <!--begin_vids_video-->
        <div class="bl_form">
            <div style="padding: 0px; overflow: hidden; width: 100%;">
                <!-- begin_video -->
                <div class="approve_photo" style="/*float:left;*/ padding: 0 0px 0px 0;">
                    <b><a href='{url_main}{url_main}search_results.php?display=profile&uid={user_id}'
                            target="_blank">{user_name}</a></b><br />
                    <b>{status}</b><br />
                    {description}
                    <br />
                    {video_html_code}
                    <div style="padding: 10px 20px;">
                        <label style="margin-right: 15px;"><input type="radio" class="radio" name="do[{video_id}]" value="public" {public_check}> {l_public}</label> 
                        <label style="margin-right: 15px;"><input type="radio" class="radio" name="do[{video_id}]" value="private" {private_check}> {l_make_private}</label> 
                        <label><input type="radio" class="radio" name="do[{video_id}]" value="del"> {l_delete}</label>
                    </div>
                </div>
                <br>
                <!-- end_video -->
            </div>

        </div>
        <!--end_vids_video-->

        <!-- begin_moderator_section -->

        <script type="text/javascript">

            $(document).ready(function () {
                create_gallery()
            });

            function create_gallery() {
                $('.edit_image_gallery').lightBox({
                    imageLoading: '{url_tmpl_administration}images/lightbox-ico-loading.gif',
                    imageBtnPrev: '{url_tmpl_administration}images/lightbox-btn-prev.gif',
                    imageBtnNext: '{url_tmpl_administration}images/lightbox-btn-next.gif',
                    imageBtnClose: '{url_tmpl_administration}images/lightbox-btn-close.gif',
                    imageBlank: '{url_tmpl_administration}images/lightbox-blank.gif'
                });
            }

            function edit_delete_image(image_id) {
                if (confirm('{l_confirm_delete_image}')) {
                    $('#edit_image_' + image_id).fadeOut(400, function () {
                        $('#edit_image_' + image_id).remove();
                        create_gallery();
                        $.ajax({
                            type: 'POST',
                            url: '{url_main}{delete_img_ajax_php}',
                            data: {
                                image_id: image_id,
                                ajax: 1,
                                '{obj_id_type}': 1,

                            }
                        });
                    });
                }
            }

            function delete_moderator_obj(obj_id, cat_name = '') {
                if (confirm('{confirm_delete_action}')) {
                    $('#moderator_obj_' + obj_id + cat_name).fadeOut(400, function () {
                        $('#moderator_obj_' + obj_id + cat_name).remove();
                        $.ajax({
                            type: 'POST',
                            url: '{url_main}{delete_moderator_object_url}',
                            data: {
                                '{obj_id_type}': obj_id,
                                ajax: 1,
                                cat_name: cat_name
                            }
                        });
                    });
                }
            }

            function approve_moderator_obj(obj_id, cat_name = '') {
                if (confirm('{confirm_approve_action}')) {
                    $('#moderator_obj_' + obj_id + cat_name).fadeOut(400, function () {
                        $('#moderator_obj_' + obj_id + cat_name).remove();
                        $.ajax({
                            type: 'POST',
                            url: '{url_main}{approve_moderator_object_url}',
                            data: {
                                '{obj_id_type}': obj_id,
                                ajax: 1,
                                cat_name: cat_name
                            }
                        });
                    });
                }
            }

            function approve_all() {
                const elements = document.querySelectorAll('[id*="moderator_obj_"]');
                const idArray = [];

                elements.forEach(element => {
                    const id = element.id;
                    const modifiedId = id.replace('moderator_obj_', '');
                    idArray.push(modifiedId);
                });

                if (confirm('{confirm_approve_all_action}')) {
                    $.ajax({
                        type: 'POST',
                        url: '{url_main}{approve_moderator_object_url}',
                        data: {
                            '{obj_id_type}': idArray,
                            ajax: 1,
                            isAll: true
                        },
                        success: function (response) {
                            elements.forEach(function (element) {
                                element.remove();
                            });
                            redirectUrl('{url_main}{redirect_url}');
                        },
                        error: function (xhr, status, error) {
                            console.log('AJAX request failed');
                            console.log(xhr.responseText);
                        },
                    });
                }
            }

        </script>

        <!-- begin_moderator_item -->

        <div class="bl_form" id="moderator_obj_{obj_id}{var_adv_cat_name_eng}"
            style="border: 1px solid rgb(118, 118, 118); padding: 5px; margin-bottom: 5px;">
            <table border="0" cellpadding="0" cellspacing="0" width="100%" align="center">
                <tr>
                    <td>
                        <label style="display: block; padding-bottom: 10px;"><b>{l_moderator_username}:</b>
                            <h3 style="display:inline; padding:0px 0px 10px 10px;"><a
                                    href='{url_main}search_results.php?display=profile&uid={user_id}'
                                    target="_blank">{user_name}</a></h3>
                        </label>
                    </td>
                </tr>
                <tr>
                    <td>

                    </td>
                </tr>
                <tr>
                    <td>
                        <label><b>{l_moderator_title}:</b></label>
                    </td>
                </tr>
                <tr>
                    <td>
                        <input style="margin: 10px 0px; width: 97%; " type="text" value="{field_title}" readonly>
                    </td>
                </tr>
                <!-- begin_category -->
                <tr>
                    <td>
                        <label style="display: block; padding-bottom:10px;">
                            <b>{l_moderator_category}:</b> <a
                                href="{url_main}adv_cat.php?cat_id={var_adv_cat_id}">{var_adv_cat_name}</a> / <a
                                href="{url_main}adv_cat.php?cat_id={var_adv_cat_id}&razd_id={var_adv_razd_id}">{var_adv_razd_name}</a><br />
                        </label>
                    </td>
                </tr>
                <!-- end_category -->

                <!-- begin_price -->
                <tr>
                    <td>
                        <label style="display: block; padding-bottom: 10px;">
                            <b>{l_moderator_price}: {price}</b>
                        </label>
                    </td>
                </tr>
                <!-- end_price -->
                <tr>
                    <td>
                        <label><b>{l_moderator_description}:</b></label>
                    </td>
                </tr>
                <tr>
                    <td>
                        <textarea style=" margin: 10px 0px;resize: none; width: 97%;" class="textarea"
                            readonly>{description}</textarea>
                    </td>
                </tr>
                <!-- begin_image -->
                <tr>
                    <td>
                        {l_moderator_edit_photo}
                    </td>
                </tr>
                <tr>
                    <td>
                        <div class="imgs" style="border-bottom: 1px solid rgb(118, 118, 118); padding-bottom: 5px;">

                            <!-- begin_moderator_img_item -->
                            <div style="width:24%;float: left; padding-top: 10px;" id="edit_image_{image_id}">

                                <a class="edit_image_gallery" alt="img" href="{image_file}">
                                    <img src="{image_thumbnail}" style="width: 60px; height: 60px;">
                                </a>

                                <p><a style="cursor: pointer; padding-left: 10px;"
                                        onClick="return edit_delete_image('{image_id}');">{l_delete}</a></p>
                            </div>
                            <!-- end_moderator_img_item -->

                        </div>
                    </td>
                </tr>
                <!-- end_image -->
                <tr>
                    <td>
                        <div style="padding:10px; float: right">
                            <input class="btn lower_header_color round big moderator_button_save"
                                onclick="approve_moderator_obj('{obj_id}', '{var_adv_cat_name_eng}')" type="button"
                                value="{l_moderator_approve}">

                            <input class="btn lower_header_color round big moderator_button_save"
                                style="background-color: rgb(222, 69, 69);"
                                onclick="delete_moderator_obj('{obj_id}', '{var_adv_cat_name_eng}')" type="button"
                                value="{l_moderator_delete}">
                        </div>
                    </td>
                </tr>

            </table>
        </div>
        <!-- end_moderator_item -->

        <!-- end_moderator_section -->

        <!-- end_sections -->
        <!--begin_profiles-->
        <style>
            #btn_save {
                display: none;
            }

            tr.color {
                background-color: #cfcfcf;
            }

            .table-moderator {
                margin-bottom: 15px;
            }

            .table-moderator tr.table-moderator-header {
                background-color: #F0F0F0;
                height: 30px;
            }

            .table-moderator tr.table-moderator-header th {
                padding-left: 4px;
            }

            .table-moderator tr.table-moderator-header th a {
                color: #000;
            }

            tr.row1 {
                background-color: #fff;
                border-bottom: 1px solid #c0c0c0;
                border-top: 1px solid #c0c0c0;
                margin-top: 2px;
            }

            .table-moderator td {
                padding: 8px 0 8px 4px;
            }

            .moderator_button_save {
                display: none;
            }
        </style>

        <!-- begin_group_list_pages -->
        <div>{num_total} {l_count_users}</div>
        <div style="position: relative; padding: 0px 0px; top: -14px; left: 300px; width: 400px; ">
            <!-- begin_group_list_prev_page --><a href="{url_page_moderator}?offset={offset}{params}">{l_prev}</a> |
            <!-- end_group_list_prev_page -->
            <!-- begin_group_list_prev_page_off --><b>{l_prev}</b> | <!-- end_group_list_prev_page_off -->
            <!-- begin_group_list_first_page --><a
                href="{url_page_moderator}?offset={offset}{params}">{l_page_1}</a><!-- end_group_list_first_page -->
            <!-- begin_group_list_prev_pages --><a
                href="{url_page_moderator}?offset={offset}{params}">&lt;&lt;</a><!-- end_group_list_prev_pages -->
            <!-- begin_group_list_page -->
            <!-- begin_group_list_link_page --><a
                href="{url_page_moderator}?offset={offset}{params}">{page}</a><!-- end_group_list_link_page -->
            <!-- begin_group_list_this_page --><b>{page}</b><!-- end_group_list_this_page -->
            <!-- end_group_list_page -->
            <!-- begin_group_list_next_pages --><a
                href="{url_page_moderator}?offset={offset}{params}">&gt;&gt;</a><!-- end_group_list_next_pages -->
            <!-- begin_group_list_last_page --><b>{l_of}</b> <a
                href="{url_page}?offset={offset}{params}">{num_pages}</a><!-- end_group_list_last_page -->
            <!-- begin_group_list_next_page --> | <a
                href="{url_page_moderator}?offset={offset}{params}">{l_next}</a><!-- end_group_list_next_page -->
            <!-- begin_group_list_next_page_off --> | <b>{l_next}</b><!-- end_group_list_next_page_off -->
        </div>
        <!-- end_group_list_pages -->

        <!-- begin_group_list_items -->
        <table cellpadding="0" cellspacing="0" border="0" class="light table-moderator" width="100%">
            <thead>
                <tr class="table-moderator-header">
                    <th>{l_action}</th>
                    <th>
                        <!-- begin_params_none_name --><a
                            href="{url_page_moderator}?{params_current}">{l_username}</a><!-- end_params_none_name -->
                        <!-- begin_params_asc_name -->&uarr;<a
                            href="{url_page_moderator}?{params_current}">{l_username}</a><!-- end_params_asc_name -->
                        <!-- begin_params_desc_name -->&darr;<a
                            href="{url_page_moderator}?{params_current}">{l_username}</a><!-- end_params_desc_name -->
                    </th>
                    <th>
                        <!-- begin_params_none_type --><a
                            href="{url_page_moderator}?{params_current}">{l_type}</a><!-- end_params_none_type -->
                        <!-- begin_params_asc_type -->&uarr;<a
                            href="{url_page_moderator}?{params_current}">{l_type}</a><!-- end_params_asc_type -->
                        <!-- begin_params_desc_type -->&darr;<a
                            href="{url_page_moderator}?{params_current}">{l_type}</a><!-- end_params_desc_type -->
                    </th>
                    <th>
                        <!-- begin_params_none_gold_days --><a
                            href="{url_page_moderator}?{params_current}">{l_gold_days}</a><!-- end_params_none_gold_days -->
                        <!-- begin_params_asc_gold_days -->&uarr;<a
                            href="{url_page_moderator}?{params_current}">{l_gold_days}</a><!-- end_params_asc_gold_days -->
                        <!-- begin_params_desc_gold_days -->&darr;<a
                            href="{url_page_moderator}?{params_current}">{l_gold_days}</a><!-- end_params_desc_gold_days -->
                    </th>
                    <th>
                        <!-- begin_params_none_mail --><a
                            href="{url_page_moderator}?{params_current}">{l_email}</a><!-- end_params_none_mail -->
                        <!-- begin_params_asc_mail -->&uarr;<a
                            href="{url_page_moderator}?{params_current}">{l_email}</a><!-- end_params_asc_mail -->
                        <!-- begin_params_desc_mail -->&darr;<a
                            href="{url_page_moderator}?{params_current}">{l_email}</a><!-- end_params_desc_mail -->
                    </th>
                    <th>
                        <!-- begin_params_none_orientation --><a
                            href="{url_page_moderator}?{params_current}">{l_orientation}</a><!-- end_params_none_orientation -->
                        <!-- begin_params_asc_orientation -->&uarr;<a
                            href="{url_page_moderator}?{params_current}">{l_orientation}</a><!-- end_params_asc_orientation -->
                        <!-- begin_params_desc_orientation -->&darr;<a
                            href="{url_page_moderator}?{params_current}">{l_orientation}</a><!-- end_params_desc_orientation -->
                    </th>
                    <th style="width:30px;">
                        <!-- begin_params_none_age --><a
                            href="{url_page_moderator}?{params_current}">{l_age}</a><!-- end_params_none_age -->
                        <!-- begin_params_asc_age -->&uarr;<a
                            href="{url_page_moderator}?{params_current}">{l_age}</a><!-- end_params_asc_age -->
                        <!-- begin_params_desc_age -->&darr;<a
                            href="{url_page_moderator}?{params_current}">{l_age}</a><!-- end_params_desc_age -->
                    </th>
                    <th>
                        <!-- begin_params_none_register --><a
                            href="{url_pregister}?{params_current}">{l_register}</a><!-- end_params_none_register -->
                        <!-- begin_params_asc_register -->&uarr;<a
                            href="{url_pregister}?{params_current}">{l_register}</a><!-- end_params_asc_register -->
                        <!-- begin_params_desc_register -->&darr;<a
                            href="{url_pregister}?{params_current}">{l_register}</a><!-- end_params_desc_register -->
                    </th>
                </tr>

                <!-- begin_group_list_item -->
                <tr class="{class} row1">
                    <td style="padding: 0px 5px; vertical-align: middle!important;">
                        <a href="{url_page}?cmd=profiles&user_delete={user_id}{view}"
                            onclick="if (confirm('{l_are_you_sure}')) return true; else return false;">{l_delete}</a>
                        |
                        <a href="{url_page}?cmd=profiles&user_approval={user_id}{view}"
                            onclick="if (confirm('{l_are_you_sure}')) return true; else return false;">{l_approval}</a>
                    </td>
                    <td><a href="{profile_url}">{name}</a></td>
                    <td>{type}</td>
                    <td>{gold_days}</td>
                    <td>{mail}</td>
                    <td>{orientation}</td>
                    <td>{age}</td>
                    <td>{register}</td>
                </tr>
                <!-- end_group_list_item -->
        </table>
        <!-- end_group_list_items -->

        <!-- begin_group_list_noitems -->
        <div align="center">{l_no_users}</div>
        <!-- end_group_list_noitems -->
        <div class="empty"></div>

        <!--end_profiles-->

        <!-- begin_approve_button_submit -->
        <input class="btn lower_header_color round big moderator_button_save" type="submit" value="{l_approve}">
        <!-- end_approve_button_submit -->
        <!-- begin_approve_button_not_submit -->
        <input class="btn lower_header_color round big moderator_button_save" type="button" onclick="approve_all()"
            value="{l_approve}">
        <!-- end_approve_button_not_submit -->
    </form>
    <!-- end_group_list -->
    <!-- begin_moderator_users_reports -->
    <style>
        tr.color {
            background-color: #cfcfcf;
        }

        .table-moderator {
            margin-bottom: 15px;
        }

        .table-moderator tr.table-moderator-header {
            background-color: #F0F0F0;
            height: 30px;
        }

        .table-moderator tr.table-moderator-header th {
            padding-left: 4px;
        }

        .table-moderator tr.table-moderator-header th a {
            color: #000;
        }

        tr.row1 {
            background-color: #fff;
            border-bottom: 1px solid #c0c0c0;
            border-top: 1px solid #c0c0c0;
            margin-top: 2px;
        }

        .table-moderator td {
            padding: 8px 0 8px 4px;
        }
    </style>
    <table cellpadding="0" cellspacing="0" border="0" class="light table-moderator" width="100%">
        <thead>
            <tr class="table-moderator-header">
                <th>{l_action}</th>
                <th>
                    {l_date}
                </th>
                <th>
                    {l_from}
                </th>
                <th>
                    {l_mail}
                </th>
                <th>
                    {l_about}
                </th>
                <th>
                    {l_mail}
                </th>
                <th>
                    {l_priority}
                </th>
                <th>
                    {l_title}
                </th>
                <th>
                    {l_message}
                </th>
            </tr>

            <!-- begin_moderator_report -->
            <tr class="row1">
                <td style="padding: 0px 5px; vertical-align: middle!important;">
                    <a href="{url_page}?section=users_reports&action=delete_report&id={id}"
                        onclick="if (confirm('{l_are_you_sure}')) return true; else return false;">{l_delete_report}</a>
                    |
                    <a href="{url_page}?section=users_reports&action=ban_user&ban_user={user_to}"
                        onclick="if (confirm('{l_are_you_sure}')) return true; else return false;">{ban_title}</a>
                </td>
                <td>{date}</td>
                <td>{from_user_name}</td>
                <td><a href="" class="sendmail" data-id="{user_from}" data-name="{from_user_name}">{l_mail}</a></td>
                <td>{to_user_name}</td>
                <td><a href="" class="sendmail" data-id="{user_to}" data-name="{to_user_name}">{l_mail}</a></td>
                <td>{priority}</td>
                <td>{title}</td>
                <td>{msg}</td>
            </tr>
            <!-- end_moderator_report -->
    </table>
    <div id="usermailpopup" class="popup">
        <div class="popup-content">
            <form id="sendmailform" name="sendmailform" method="POST" action="" style="padding: 0px; margin: 0px;">
                <p style="font-size: 16px;">
                    <strong>{l_username}:</strong>
                    <input type="hidden" name="uid" id="uid" value="">
                    <input type="hidden" name="cmd" value="admin_send_mail">
                    <span id="uname">

                    </span>
                </p>
                <p style="font-size: 16px;">
                    <strong>{l_subject}:</strong>
                    <input class="custom-input-textarea" type="text" name="subject" id="subject" value="" tabindex="1">
                </p>
                <p style="font-size: 16px;">
                    <strong>{l_message}:</strong>
                    <textarea id="textmsg" name="text" class="custom-input-textarea" tabindex="2"></textarea>
                </p>
                <input type="button" id="send_message" value="{l_send}" class="custom-button" tabindex="3"
                    title="{l_send}">
                <input type="button" id="closePopup" class="custom-button red" value="{l_close}" title="{l_close}">
            </form>
        </div>
    </div>
    <script type="text/javascript">
        $(document).ready(function () {
            $(".sendmail").click(function () {
                var uid = $(this).data("id");
                var uname = $(this).data("name");
                $("#usermailpopup").find("#uid").val(uid);
                $("#usermailpopup").find("#uname").html(uname);
                $("#usermailpopup").addClass("show");
                return false;
            });
            $("#closePopup").click(function () {
                $("#usermailpopup").removeClass("show");
                return false;
            });

            $("#send_message").click(function () {
                if ($("#subject").val() == "") {
                    // Alert for enter subject
                    Swal.fire(
                        '{l_error}!',
                        '{l_enter_subject}',
                        'error'
                    );
                } else if ($("#textmsg").val() == "") {
                    // Alert for enter text
                    Swal.fire(
                        '{l_error}!',
                        '{l_enter_message}',
                        'error'
                    );
                } else {
                    // Call ajax to send mail
                    $.ajax({
                        url: "{url_main}/ajax_custom.php",
                        type: "post",
                        dataType: "json",
                        data: $("#sendmailform").serialize(),
                        beforeSend: function () {
                            $("#send_message").prop("disabled", true);
                        },
                        success: function (res) {
                            if (res.status == "ok") {
                                $("#send_message").prop("disabled", false);
                                $("#usermailpopup").removeClass("show");
                                $("#subject").val("");
                                $("#textmsg").val("");
                                Swal.fire(
                                    '{l_mail_sent}!',
                                    '{l_mail_sent_msg}',
                                    'success'
                                );
                            }
                        }
                    });
                }
            });
        });
    </script>
    <!-- end_moderator_users_reports -->
    <!-- begin_moderator_support_tickets -->
    <style>
        tr.color {
            background-color: #cfcfcf;
        }

        .table-moderator {
            margin-bottom: 15px;
        }

        .table-moderator tr.table-moderator-header {
            background-color: #F0F0F0;
            height: 30px;
        }

        .table-moderator tr.table-moderator-header th {
            padding-left: 4px;
        }

        .table-moderator tr.table-moderator-header th a {
            color: #000;
        }

        tr.row1 {
            background-color: #fff;
            border-bottom: 1px solid #c0c0c0;
            border-top: 1px solid #c0c0c0;
            margin-top: 2px;
        }

        .table-moderator td {
            padding: 8px 0 8px 4px;
        }

        /*#lightbox-container-image-box {
            max-width: 80%;
            height: auto !important;
        }

        #lightbox-container-image img {
            max-width: 100%;
        }

        #lightbox-container-image-data-box {
            max-width: 80%;
            margin-bottom: 50px;
        }*/
    </style>
    <table cellpadding="0" cellspacing="0" border="0" class="light table-moderator" width="100%">
        <thead>
            <tr class="table-moderator-header">
                <th>{l_action}</th>
                <th>
                    {l_date}
                </th>
                <th>
                    {l_from}
                </th>
                <th>
                    {l_mail}
                </th>
                <th>
                    {l_status}
                </th>
                <th>
                    {l_priority}
                </th>
                <th>
                    {l_title}
                </th>
                <th>
                    {l_image}
                </th>
            </tr>

            <!-- begin_support_tickets -->
            <tr class="row1">
                <td style="padding: 0px 5px; vertical-align: middle!important;">
                    <a href="{url_page}?section=support_tickets&action=delete_ticket&id={id}"
                        onclick="if (confirm('{l_are_you_sure}')) return true; else return false;">{l_delete}</a> |
                    <a href="moderator_view_ticket.php?id={id}">{l_reply}</a>
                </td>
                <td>{date}</td>
                <td>{from_user_name}</td>
                <td><a  class="sendmail" data-id="{user_from}" data-name="{from_user_name}" style="text-decoration: underline;">{l_mail}</a></td>
                <td>{status_dropdown}</td>
                <td>{priority}</td>
                <td>{title}</td>
                <td>{attachment}</td>
            </tr>
            <!-- end_support_tickets -->
    </table>
    <div id="usermailpopup" class="popup">
        <div class="popup-content">
            <form id="sendmailform" name="sendmailform" method="POST" action="" style="padding: 0px; margin: 0px;">
                <p style="font-size: 16px;">
                    <strong>{l_username}:</strong>
                    <input type="hidden" name="uid" id="uid" value="">
                    <input type="hidden" name="cmd" value="admin_send_mail">
                    <span id="uname">

                    </span>
                </p>
                <p style="font-size: 16px;">
                    <strong>{l_subject}:</strong>
                    <input class="custom-input-textarea" type="text" name="subject" id="subject" value="" tabindex="1">
                </p>
                <p style="font-size: 16px;">
                    <strong>{l_message}:</strong>
                    <textarea id="textmsg" name="text" class="custom-input-textarea" tabindex="2"></textarea>
                </p>
                <input type="button" id="send_message" value="{l_send}" class="custom-button" tabindex="3"
                    title="{l_send}">
                <input type="button" id="closePopup" class="custom-button red" value="{l_close}" title="{l_close}">
            </form>
        </div>
    </div>
    <script type="text/javascript">
        $(document).ready(function () {
            $('a[data-lightbox]').lightBox({
                imageLoading: '{url_tmpl_administration}images/lightbox-ico-loading.gif',
                imageBtnPrev: '{url_tmpl_administration}images/lightbox-btn-prev.gif',
                imageBtnNext: '{url_tmpl_administration}images/lightbox-btn-next.gif',
                imageBtnClose: '{url_tmpl_administration}images/lightbox-btn-close.gif',
                imageBlank: '{url_tmpl_administration}images/lightbox-blank.gif',
            });

            $(".ticket_status").change(function () {
                var status = $(this).val();
                var tId = $(this).attr("data-id");
                $.ajax({
                    url: "{url_main}/ajax_custom.php",
                    type: "post",
                    dataType: "json",
                    data: "cmd=ticket_status&status=" + status + "&tid=" + tId,
                    beforeSend: function () {

                    },
                    success: function (res) {
                        if (res.res == "ok") {
                            Swal.fire({
                                position: 'top-end',
                                icon: 'success',
                                title: 'Saved',
                                showConfirmButton: false,
                                timer: 1500
                            });
                        }
                    }
                });
            });
            if ("{saved}" == "yes") {
                Swal.fire(
                    'Saved!',
                    '',
                    'success'
                );
            }

            $(".sendmail").click(function () {
                var uid = $(this).data("id");
                var uname = $(this).data("name");
                $("#usermailpopup").find("#uid").val(uid);
                $("#usermailpopup").find("#uname").html(uname);
                $("#usermailpopup").addClass("show");
                return false;
            });
            $("#closePopup").click(function () {
                $("#usermailpopup").removeClass("show");
                return false;
            });

            $("#send_message").click(function () {
                if ($("#subject").val() == "") {
                    // Alert for enter subject
                    Swal.fire(
                        '{l_error}!',
                        '{l_enter_subject}',
                        'error'
                    );
                } else if ($("#textmsg").val() == "") {
                    // Alert for enter text
                    Swal.fire(
                        '{l_error}!',
                        '{l_enter_message}',
                        'error'
                    );
                } else {
                    // Call ajax to send mail
                    $.ajax({
                        url: "{url_main}/ajax_custom.php",
                        type: "post",
                        dataType: "json",
                        data: $("#sendmailform").serialize(),
                        beforeSend: function () {
                            $("#send_message").prop("disabled", true);
                        },
                        success: function (res) {
                            if (res.status == "ok") {
                                $("#send_message").prop("disabled", false);
                                $("#usermailpopup").removeClass("show");
                                $("#subject").val("");
                                $("#textmsg").val("");
                                Swal.fire(
                                    '{l_mail_sent}!',
                                    '{l_mail_sent_msg}',
                                    'success'
                                );
                            }
                        }
                    });
                }
            });
        });
    </script>
    <!-- end_moderator_support_tickets -->
</div>

</div>

{footer}